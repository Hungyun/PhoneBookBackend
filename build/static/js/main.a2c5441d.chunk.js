(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),r=t.n(c),a=t(7),o=t(4),u=t(2),i=t(3),s=t.n(i),l=t(0),d=function(e){var n=e.person,t=e.onClick;return Object(l.jsxs)(l.Fragment,{children:[n.name," ",n.number,Object(l.jsx)("button",{name:n.name,value:n.id,onClick:t,children:"delete"}),Object(l.jsx)("br",{})]})},j="/api/persons",b=function(){return s.a.get(j).then((function(e){return e.data}))},h=function(e){return s.a.post(j,e).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){var n="".concat(j,"/").concat(e);return s.a.delete(n).then((function(e){return e}))},O=function(e){return Object(l.jsxs)("div",{children:["filter shown with",Object(l.jsx)("input",{value:e.searchString,onChange:e.handleSearchString})]})},g=function(e){var n=e.message;return null===n?null:Object(l.jsx)("div",{className:"error",children:n})},v=function(e){return Object(l.jsxs)("form",{onSubmit:e.addPerson,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){return Object(l.jsx)(l.Fragment,{children:e.personsToShow.map((function(n){return Object(l.jsx)(d,{person:n,onClick:e.onClick},n.id)}))})},x=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),i=Object(o.a)(r,2),s=i[0],d=i[1],j=Object(u.useState)(""),x=Object(o.a)(j,2),w=x[0],S=x[1],C=Object(u.useState)(""),k=Object(o.a)(C,2),N=k[0],y=k[1],E=Object(u.useState)(null),P=Object(o.a)(E,2),T=P[0],D=P[1];Object(u.useEffect)((function(){b().then((function(e){c(e)}))}),[]),console.log("render",t.length,"persons"),console.log("after rendering: persons are: ",t);var F=t.filter((function(e){return!0===e.name.includes(N)}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(g,{message:T}),Object(l.jsx)(O,{searchString:N,handleSearchString:function(e){console.log(e.target.value),y(e.target.value)}}),Object(l.jsx)("h3",{children:"add a new"}),Object(l.jsx)(v,{addPerson:function(e){e.preventDefault();var n=!0;(t.forEach((function(e){if(e.name===s){n=!1;var r=e.id;if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var o=t.find((function(e){return e.id===r})),u=Object(a.a)(Object(a.a)({},o),{},{number:w});f(r,u).then((function(e){c(t.map((function(n){return n.id!==r?n:e}))),d(""),S("")}))}}})),n)&&h({name:s,number:w}).then((function(e){c(t.concat(e)),D("Added ".concat(s)),d(""),S("")}))},newName:s,handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},newNumber:w,handleNumberChange:function(e){console.log(e.target.value),S(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(p,{personsToShow:F,onClick:function(e){var n=e.target.value,r="Delete ".concat(e.target.name," ?");if(window.confirm(r)){for(var o=Object(a.a)({},t),u=Object.values(o),i=-1,s=0;s<u.length;s++)u[s].id==n&&(i=s);u.splice(i,1),m(n).then((function(e){c(u)})).catch((function(n){D("Information of '".concat(e.target.name,"' was already removed from server")),c(u),setTimeout((function(){D(null)}),5e3)}))}}})]})};t(41);r.a.render(Object(l.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a2c5441d.chunk.js.map